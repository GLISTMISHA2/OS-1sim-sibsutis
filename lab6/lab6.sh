# Проверка числа параметров
if [ "$#" -ne 3 ]; then
    echo "Ошибка: скрипт требует: каталог и два значения в байтах."
    exit 1
fi

# Присвоение параметров переменным
dir="$1"
min_size="$2"
max_size="$3"

# Проверка существования каталога
if [ ! -d "$dir" ]; then
    echo "Ошибка: каталог '$dir' не существует."
    exit 1
fi

# Проверка корректности диапазона размеров
if [ "$min_size" -gt "$max_size" ]; then
    echo "Ошибка: минимальный размер не может быть больше максимального."
    exit 1
fi

# Инициализация счетчика файлов
file_count=0

# Цикл для обработки файлов в указанном диапазоне размеров
for file in "$dir"/*; do
    # Проверка, является ли объект файлом
    if [ -f "$file" ]; then
        # Получение размера файла
        file_size=$(stat -c%s "$file")
        
        # Проверка, попадает ли размер файла в указанный диапазон
        if [ "$file_size" -ge "$min_size" ] && [ "$file_size" -le "$max_size" ]; then
            # Увеличение счетчика файлов
            file_count=$((file_count + 1))
            
            # Вычисление контрольной суммы
            checksum=$(cksum "$file" | awk '{print $1}')

            echo "Контрольная сумма $file_count файла равна $checksum"
        fi
    fi
done

# Проверка, были ли обработаны файлы
if [ "$file_count" -eq 0 ]; then
    echo "В указанном каталоге нет файлов размером от $min_size до $max_size байт."
else
    echo "Обработано $file_count файлов."
fi
